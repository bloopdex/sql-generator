{
  "ventes_ca_ia": {
    "name": "ventes_ca_ia",
    "use_case": "Header table for sales transactions (facture/bon), storing overall sales info, client details, financial totals, and status flags.",
    "columns": {
      "VNT_ID": "Unique identifier of the sale",
      "VNT_TYPE": "Type of sale (facture, BL, avoir)",
      "VNT_ANNEE": "Year of the sale",
      "VNT_DATE": "Date of the sale",
      "VNT_TER_ID": "Client identifier",
      "VNT_TER_TYPE": "Client type",
      "VNT_NFACTURE": "Invoice number",
      "VNT_FACTURE_DATE": "Invoice date",
      "VNT_TOTAL_HT": "Total amount excluding tax",
      "VNT_TOTAL_TVA": "Total VAT amount",
      "VNT_TOTAL_TTC": "Total amount including tax",
      "NET_HT": "Net amount excluding tax (used for CA calculations)",
      "VNT_TOTAL_VENTE": "Total sales amount",
      "VNT_TOTAL_AVOIR": "Total credit note amount",
      "BENEFICE": "Profit",
      "TX_MARGE": "Margin rate",
      "REGLEMENT": "Payment settlement info",
      "SOLDE": "Remaining balance",
      "VNT_STATUT": "Sales status",
      "VNT_ETAT_FLAG": "Validated flag (1 = validated)",
      "VNT_ANNULE_FLAG": "Cancellation flag (0 = not cancelled)",
      "VNT_AVOIR_FLAG": "Credit note flag (0 = not avoir)",
      "VNT_COMPTA_FLAG": "Accounting status",
      "VNT_PREP_FLAG": "Preparation status",
      "VNT_CONTROLE_FLAG": "Control status",
      "VNT_CAT_ID": "Category ID",
      "VNT_CAT2_ID": "Secondary category ID",
      "VNT_DEPOT_CODE": "Depot/Warehouse code",
      "VNT_CMP_ID": "Company identifier"
    },
    "filters": {
      "Exclude annulled": "VNT_ANNULE_FLAG = 0",
      "Exclude credit notes": "VNT_AVOIR_FLAG = 0",
      "Only validated": "VNT_ETAT_FLAG = 1"
    }
  },

  "ventes_details": {
    "name": "ventes_details",
    "use_case": "Line-level details of products sold, including quantities, prices, discounts, and margins.",
    "columns": {
      "VND_VNT_ID": "Reference to VENTES_CA.VNT_ID",
      "VND_MED_ID": "Product identifier",
      "VND_NLOT": "Batch/Lot number",
      "VND_DATE_PEREMPTION": "Expiry date",
      "VND_QTE": "Quantity sold",
      "QTE_UG": "Quantity in unit of measure UG",
      "VND_PRIX_PH": "Pharmacy price",
      "VND_PRIX_PPA": "PPA price",
      "VND_PRIX_SH": "SH price",
      "VND_TX_REMISE": "Discount rate",
      "VND_MT_REMISE": "Discount amount",
      "VND_TX_RISTOURNE": "Ristourne rate",
      "VND_MT_RISTOURNE": "Ristourne amount",
      "VND_MONTANT": "Line amount HT",
      "VND_MONT_TVA": "Line amount VAT",
      "VND_MONT_TTC": "Line amount TTC",
      "VND_BENIFICE": "Line profit",
      "VND_MARGE_PH": "Margin indicator",
      "VND_DEPOT_CODE": "Depot code",
      "VND_PREPARE_FLAG": "Preparation status",
      "VND_CONTROLE_FLAG": "Control status",
      "VND_QTE_CDE": "Ordered quantity",
      "VND_QTE_PREPARE": "Prepared quantity",
      "VND_QTE_TRANSF": "Transferred quantity"
    },
    "calculation_rules": {
      "CA_PRODUIT_HT": "VND_MONT_TTC - VND_MONT_TVA"
    },
    "join_keys": {
      "ventes_ca": ["VNT_ID = VND_VNT_ID"],
      "bi_produits": ["VND_CMP_ID, VND_MED_ID = NSITE, ID_PRODUIT"]
    }
  },

  "bi_produits": {
    "name": "bi_produits",
    "use_case": "Product master data with attributes for categorization, logistics, and regulatory details.",
    "columns": {
      "NSITE": "Site identifier",
      "ID_PRODUIT": "Unique product identifier",
      "CODE_PRODUIT": "Internal product code",
      "NOM_PRODUIT": "Commercial product name",
      "CODE_DCI": "DCI code",
      "CAT_CODE": "Main category code",
      "CAT_CODE2": "Secondary category code",
      "CODE_FORME": "Pharmaceutical form code",
      "CODE_FOURNISSEUR": "Supplier code",
      "CODE_LABO": "Laboratory code",
      "CLASSE_CODE": "Therapeutic class code",
      "REMBOURSEMENT": "Reimbursement indicator",
      "PSYCHOTROPE": "Psychotropic indicator",
      "FRIGO": "Refrigerated storage flag",
      "CHERE": "Expensive product indicator",
      "Code_CNAS": "CNAS reference code",
      "NEnregistrement": "Registration number",
      "COLISAGE": "Packaging info",
      "Condit": "Conditioning type",
      "Poids": "Weight",
      "Dimensions": "Dimensions (LxWxH)",
      "Seuil_securite": "Safety stock threshold",
      "Delais_alerte": "Alert delay",
      "QUATA": "Quota",
      "SOUS_TENSION": "Under tension flag"
    }
  },

  "bi_tiers": {
    "name": "bi_tiers",
    "use_case": "Customer master data enriched with segmentation, region, and risk indicators.",
    "columns": {
      "TIER_ID": "Unique client/fournisseur ID",
      "RAISON_SOCIALE": "Client name",
      "TIER_TYPE": "Type (1 = Client, 2 = Fournisseur)",
      "CATEGORIE_ID": "Category ID",
      "FAMILLE_ID": "Family ID",
      "REGION_CODE": "Region code",
      "REGION": "Region name",
      "WILAYA_CODE": "Wilaya code",
      "VILLE": "City",
      "COMMERCIAL_ATTACHE": "Primary salesperson",
      "COMMERCIAL_RESERVE": "Backup salesperson",
      "SOLDE_MAX": "Client credit limit",
      "BLOCAGE": "Blocking indicator (1 = blocked)",
      "PSYCHOTROPE": "Psychotropic restriction",
      "CAGNOTTE": "Loyalty program indicator",
      "ACTIVE": "Active flag (1 = active)"
    }
  }
}
